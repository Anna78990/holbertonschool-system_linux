once I delete 'while(1)' output was printed, but only a request('http_req GET /') was printed.
How can I print the output of the other requests??

--

/**
 * main - opens an IPv4/TCP socket, and listens to traffic on port 8080
 *
 * Return: exit status
 */
int main(void)
{
	int server_fd, client_fd;
	struct sockaddr_in server_addr, client_addr;
	socklen_t addr_len = sizeof(client_addr);
	char *client_ip;

	server_fd = socket(AF_INET, SOCK_STREAM, 0);
	if (server_fd < 0)
	{
		perror("socket creation failed");
		exit(EXIT_FAILURE);
	}
	server_addr.sin_family = AF_INET;
	server_addr.sin_addr.s_addr = INADDR_ANY;
	server_addr.sin_port = htons(PORT);
	if (bind(server_fd, (struct sockaddr *)&server_addr, sizeof(server_addr)) < 0)
	{
		perror("bind failed");
		exit(EXIT_FAILURE);
	}
	if (listen(server_fd, 1) < 0)
	{
		perror("listen failed");
		exit(EXIT_FAILURE);
	}
	printf("Server listening on port %d\n", PORT);
	client_fd = accept(server_fd, (struct sockaddr *)&client_addr, &addr_len);
	if (client_fd < 0)
		perror("accept failed"), exit(EXIT_FAILURE);
	client_ip = (char *)malloc(sizeof(char) * INET_ADDRSTRLEN);
	inet_ntop(AF_INET, &(client_addr.sin_addr), client_ip, INET_ADDRSTRLEN);
	printf("Client connected: %s\n", client_ip);
	free(client_ip);
	handle_request(client_fd);
	close(server_fd);
	return (EXIT_SUCCESS);
}
---
#!/bin/bash

if [ $# -lt 1 ]
then
        echo "Usage: $0 <command>" >&2
        exit 1
fi

rm -rf todo_api_output
rm -rf curl_output

function http_req
{
        curl -w "%{http_code}\n" -s -o /dev/null -X "$1" 'http://localhost:8080'"$2" >> curl_output 2>&1
}

(timeout --preserve-status 5s "$1" > todo_api_output 2>&1 &)
sleep 1

http_req GET /
http_req POST /holberton_school
http_req HEAD /holberton/school
---
Server listening on port 8080
Client connected: 127.0.0.1
Raw-request: "GET / HTTP/1.1
User-Agent: curl/7.68.0
Host: localhost:8080
Accept: */*

"
Method: GET
Path: /
Version: HTTP/1.1
